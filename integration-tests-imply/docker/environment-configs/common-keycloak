#
# Copyright (c) Imply Data, Inc. All rights reserved.
#
# This software is the confidential and proprietary information
# of Imply Data, Inc. You shall not disclose such Confidential
# Information and shall use it only in accordance with the terms
# of the license agreement you entered into with Imply.
#

LANG=C.UTF-8
LANGUAGE=C.UTF-8
LC_ALL=C.UTF-8

# JAVA OPTS
COMMON_DRUID_JAVA_OPTS=-Duser.timezone=UTC -Dfile.encoding=UTF-8 -Dlog4j.configurationFile=/shared/docker/lib/log4j2.xml -XX:+ExitOnOutOfMemoryError -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/tmp
DRUID_DEP_LIB_DIR=/shared/hadoop_xml:/shared/docker/lib/*:/usr/local/druid/lib/mysql-connector-java.jar

# Druid configs
druid_extensions_loadList=[]
druid_extensions_directory=/shared/docker/extensions
druid_auth_authenticator_ImplyKeycloakAuthenticator_authenticatorName=ImplyKeycloakAuthenticator
druid_auth_authenticator_ImplyKeycloakAuthenticator_authorizerName=ImplyKeycloakAuthorizer
druid_auth_authenticator_ImplyKeycloakAuthenticator_type=imply-keycloak


druid_auth_authenticator_basic_authorizerName=basic
druid_auth_authenticator_basic_initialAdminPassword=priest
druid_auth_authenticator_basic_initialInternalClientPassword=warlock
druid_auth_authenticator_basic_type=basic

druid_auth_authenticatorChain=["ImplyKeycloakAuthenticator", "basic"]
druid_auth_authorizer_ImplyKeycloakAuthorizer_type=imply-keycloak
druid_auth_authorizer_basic_type=basic
druid_auth_authorizers=["ImplyKeycloakAuthorizer", "basic"]

# many of the keycloak options live in druid.sh

# common keycloak
# delete this once keycloak server includes imply custom 'not-before' policies extension
druid_auth_keycloak_common_enforceNotBeforePolicies=false

# external client
druid_keycloak_realm=druid
druid_keycloak_resource=some-druid-cluster
# set in druid.sh (script doesnt like '-')
#druid_keycloak_auth-server-url=http://imply-keycloak:8080/auth
#druid_keycloak_bearer-only=true
#druid_keycloak_ssl-required=NONE
#druid_keycloak_verify-token-audience=true
#druid_keycloak_use-resource-role-mappings=true

# Internal communications
druid_escalator_type=imply-keycloak
druid_escalator_authorizerName=ImplyKeycloakAuthorizer
druid_escalator_keycloak_realm=druid
druid_escalator_keycloak_resource=some-druid-cluster-internal
# set in druid.sh (script doesnt like '-')
#druid_escalator_keycloak_auth-server-url=http://imply-keycloak:8080/auth
#druid_escalator_keycloak_ssl-required=NONE
#druid_escalator_keycloak_credentials={"secret" : "secret"}
#druid_escalator_keycloak_verify-token-audience=true

druid_client_https_certAlias=druid
druid_client_https_keyManagerPassword=druid123
druid_client_https_keyStorePassword=druid123
druid_client_https_keyStorePath=/tls/server.jks
druid_client_https_protocol=TLSv1.2
druid_client_https_trustStoreAlgorithm=PKIX
druid_client_https_trustStorePassword=druid123
druid_client_https_trustStorePath=/tls/truststore.jks
druid_enableTlsPort=true
druid_lookup_numLookupLoadingThreads=1
druid_server_http_numThreads=20
# Allow OPTIONS method for ITBasicAuthConfigurationTest.testSystemSchemaAccess
druid_server_http_allowedHttpMethods=["OPTIONS"]
druid_server_https_certAlias=druid
druid_server_https_keyManagerPassword=druid123
druid_server_https_keyStorePassword=druid123
druid_server_https_keyStorePath=/tls/server.jks
druid_server_https_keyStoreType=jks
druid_server_https_requireClientCertificate=true
druid_server_https_trustStoreAlgorithm=PKIX
druid_server_https_trustStorePassword=druid123
druid_server_https_trustStorePath=/tls/truststore.jks
druid_server_https_validateHostnames=true
druid_zk_service_host=druid-zookeeper-kafka
druid_auth_basic_common_maxSyncRetries=20
druid_indexer_logs_directory=/shared/tasklogs
druid_sql_enable=true
druid_extensions_hadoopDependenciesDir=/shared/hadoop-dependencies
druid_request_logging_type=slf4j

# TODO: Remove when cache layer implemented
druid_metadata_storage_type=mysql
druid_metadata_storage_connector_connectURI=jdbc:mysql://druid-metadata-storage/druid
druid_metadata_storage_connector_user=druid
druid_metadata_storage_connector_password=diurd
